<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0053)http://person.zj.cninfo.net/~lifu/program/big5-gb.htm -->
<HTML><HEAD><TITLE>BIG5到GB的转换技术</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type><LINK 
href="BIG5到GB的转换技术.files/my.css" rel=stylesheet>
<META content="Microsoft FrontPage 4.0" name=GENERATOR></HEAD>
<BODY stylesrc="../../index1.htm" background="../../res/back.gif">
<div align="center"><center>

<table border="1" cellspacing="0" cellpadding="2" width="95%" style="font-size: 9pt"
bordercolor="#000000" bordercolordark="#FFFFFF">
  <tr bgcolor="#CCFFCC">
    <td><span style="font-size: 9pt">您现在的位置是： <b><a href="../progidx.htm">编程技巧</a> --&gt;  
      Visual C --&gt; </b> </span><FONT class=p11>BIG5到</FONT><FONT class=p11>GB</FONT><FONT class=p11 color=#ffffff>的转换技术</FONT></td> 
  </tr> 
</table> 
</center></div><div align="center"><center> 
 
<table border="1" width="95%" style="font-size: 9pt" bgcolor="#FFFFFF" 
bordercolor="#000000" cellpadding="2" cellspacing="0" bordercolordark="#FFFFFF"> 
  <tr> 
    <td width="15%" align="center" valign="top"><!--webbot bot="Include" 
      U-Include="../progmenu.htm" TAG="BODY" startspan -->

<table border="1" width="13%" bordercolor="#000000" cellspacing="3" cellpadding="3" style="font-size: 9pt; border-style: solid; border-color: #FFFFFF">
  <tr>
    <td width="100%" align="center"><a href="Vcidx098.htm" target="_self"><strong>Visual 
      C</strong></a></td> 
  </tr> 
  <tr> 
    <td width="100%" align="center"><a href="../Vb/Vbidx099.htm" target="_self"><strong>VBasic</strong></a></td>
  </tr>
  <tr>
    <td width="100%" align="center"><strong><a href="../Vfp/Vfp_idx.htm" target="_self">VFoxpro</a></strong></td>
  </tr>
  <tr>
    <td width="100%" align="center"><strong><a href="../Delphi/Del_idx.htm" target="_self">Delphi</a></strong></td>
  </tr>
  <tr>
    <td width="100%" align="center"><a href="../powerbuild/pow_idx.htm" target="_self"><b>PowerBuilder</b></a></td>
  </tr>
  <tr>
    <td width="100%" align="center"><a href="../linux/linuxidx.htm" target="_self"><b>Linux</b></a></td>
  </tr>
  <tr>
    <td width="100%" align="center"><strong><a href="../other/oth_idx.htm" target="_self">其它</a></strong></td>
  </tr>
</table>
<!--webbot bot="Include" endspan i-checksum="63606" --> 
 
    </td> 
    <td width="85%" align="left" valign="top"><table border="1" width="32%" style="font-size: 9pt" height="30" 
    cellspacing="0" cellpadding="2" bgcolor="#FFFFFF" bordercolor="#000000" 
    bordercolordark="#FFFFFF"> 
      <tr> 
        <td width="100%" bgcolor="#4264B5"><p align="center"><span style="font-size: 9pt"><font 
        color="#FFFFFF">资料整理&middot;<a href="http://chinaprog.yeah.net" target="_blank" 
        style="color: rgb(255,255,255)">中国程序员网站</a></font></span></td> 
      </tr> 
    </table> 
      <p align="center"><B><FONT class=p11>BIG5到</FONT><FONT class=p11>GB</FONT><FONT class=p11 color=#ffffff>的转换技术</FONT></B></p> 
      <p>  
      中文因为数量太多，所以与英文用ASCII码一个字节表示不同，它使用两个字节来表示。通过计算这两个字节，我们可以得到其表示的汉字在中文字库中的位置。读取该位置的若干字节，以获得表示这个汉字的点阵信息。有了这些信息，就可以分别在DOS或WINDOWS中显示该汉字。事实上，在文本文件中保存的就是每个汉字对应的两个字节编码，而显示问题由中文操作系统自动解决。<BR>&nbsp;&nbsp;  
      汉字编码并不统一，我们使用的是GB码，而台湾地区使用的是BIG5码。BIG5码文件中保存的是汉字相应的BIG5编码，GB码文件中保存的是汉字相应的GB编码（这也就是“乱码现象”的来由）。所以转换工作的关键是有一个记录每个BIG5编码对应GB编码的码表文件。<BR><STRONG>第一步  
      制作码表文件</STRONG><BR>&nbsp;&nbsp;   
      BIG5码编码规则是这样的：每个汉字由两个字节构成，第一个字节的范围从0X81－0XFE，共126种。第二个字节的范围分别为0X40－0X7E，0XA1－0XFE，共157种。也就是说，利用这两个字节共可定义出   
      126 *   
      157＝19782种汉字。这些汉字的一部分是我们常用到的，如一、丁，这些字我们称为常用字，其BIG5码的范围为0XA440－0XC671，共5401个。较不常用的字，如滥、调，我们称为次常用字，范围为   
      0XC940－0XF9FE，共7652个，剩下的便是一些特殊字符。<BR>&nbsp;&nbsp;  
      制作码表文件的原理是这样的：首先将所有的BIG5编码写入一个文件，然后，使用具有BIG5码到GB码转换功能的软件，如地球村、东方快车、四通利方，将文件转换为GB码文件，即得到码表文件。<BR>&nbsp;&nbsp;  
      下面的源程序将所有可能的BIG5编码（0XA100－0XFEFF）写入文件“Table.TXT”。<BR>//TURBO C++   
      3.0<BR>#include &lt;Stdio.h&gt;<BR>#include &lt;stdlib.h&gt;<BR>void   
      main(){<BR>FILE * codefile;<BR>int   
      i,j,k;<BR>codefile=fopen("table.txt","w+b");<BR>for   
      (i=0xa1;i&lt;=0xfe;I++){<BR>for(j=0x00;j&lt;=0xff;j++){<BR>fwrite(&amp;   
      i,1,1,codefile);<BR>fwrite(&amp;   
      j,1,1,codefile);}<BR>}<BR>fclose(codefile);<BR>return;<BR>}<BR>&nbsp;&nbsp;  
      运行地球村、东方快车或四通利方，将“Table.txt”从BIG5码转换为GB码，即获得码表文件。<BR><STRONG>第二步  
      转换</STRONG><BR>&nbsp;&nbsp; 下面的源程序，将BIG5码文件转换为GB码文件。<BR>//TURBO   
      C++3.0<BR>#include &lt;stdio.h&gt;<BR>#include &lt;stdlib.h&gt;<BR>void   
      main(){<BR>int que, wei;<BR>FILE * sourcefile;<BR>FILE * tabfile;<BR>FILE   
      * destfile;<BR>sourcefile = fopen("big.txt', "r+b");<BR>//BIG5   
      码文件<BR>tabfile = fopen("table.txt", 'r+b");<BR>//码表文件<BR>destfile =   
      fopen("gb.txt","w+b");<BR>//转换生成的GB码文件<BR>while   
      (!feof(sourcefile)){<BR>fread(&amp; que,1,1,sourcefile);<BR>if   
      (feof(sourcefile)){<BR>break; }<BR>if (que&gt; =0xa1 &amp;&amp; que   
      &lt;=0xfe)<BR>//叛断是否汉字（BIG5编码）<BR>{fread(&amp; wei,1,1,sourcefile);<BR>if   
      (wei&lt;0xa1) wei = wei - 0x40;<BR>if (wei&gt;=0xa1) wei = wei - 0xa1 +   
      0x7e - 0x40 + 1;<BR>fseek(tabfile, 2 * ((que -0xa1) * (0xfe - 0xa1 + 1 +   
      0x7e - 0x40 + 1 ) + wei), SEEK_SET);<BR>fread(&amp;   
      que,1,1,tabfile);<BR>fread(&amp; wei,1,1,tabfile);<BR>fwrite(&amp;   
      que,1,1,destfile);<BR>fwrite(&amp;   
      wei,1,1,destfile);<BR>}<BR>else<BR>fwrite(&amp; que,1,1,destfile);   
      //处理英文<BR>}<BR>fclose(sourcefile);<BR>fclose(tabfile);<BR>fclose(destfile);<BR>return;<BR>}<BR>&nbsp;&nbsp;  
      以上程序在Win95/97，TC3.0   
  通过。稍加修改，也可用于VC或VB程序中。用同样的方法，我们也可以将GB码转换为BIG5码。  
    </td>  
  </tr>  
  <tr>  
    <td width="100%" colspan="2" align="center" valign="top">　</td>  
  </tr>  
</table>  
</center></div>  
<BR><BR>  
</BODY></HTML>  
